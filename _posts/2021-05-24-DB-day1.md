---
layout: post

title: "DB-Day1 2021-05-24. "
excerpt: "데이터베이스와 데이터베이스 시스템(데이터, 정보, 지식), 데이터베이스 개념·특징·구성, DBMS장점, 데이터베이스 언어, SQL, 사용자, 데이터모델, 개념적 구조, 데이터 독립성, 릴레이션(개념, 스키마, 인스턴스, 특징), 관계데이터모델, 키, 무결성 제약조건"

categories:
  - DataBase
tags:
  - [DataBase, DB]
  
toc: true
toc_sticky: true
 
date: 2021-05-30
last_modified_at: 2021-05-30
---

# 01. 데이터베이스 시스템의 개념

### 데이터베이스와 데이터베이스 시스템

##### 데이터, 정보, 지식

<u>데이터가 모이면 정보</u>가 되고, <u>정보가 모이면 지식</u>이 된다. 
<u>데이터</u>는 **관찰의 결과**로 나타난 **정량적 혹은 정성적인 실제 값**을 말하고, 
<u>정보</u>는 **데이터에 의미를 부여**한 것을 말하며, 
<u>지식</u>은 **사물이나 현상에 대한 이해**를 말한다.
예를들어 에베레스트 <u>산의 높이는 데이터</u>에, 에베레스트산의 <u>지리적인 특성을 설명한 것은 정보</u>에, 에베레스트산에 올라가는 <u>가장 좋은 방법을 소개하는(정보를 포함한) 보고서는 지식</u>에 해당된다.


검색과 변경 빈도에 따른 데이터베이스 유형

| 유형  | 검색 빈도  | 변경 빈도  | 특징  |
|---|---|---|---|
| 유형 1  | 적다  | 적다  |  1. 검색이 많지 않아 데이터베이스를 구축할 필요 없음.   <br />    2. 보존가치가 있는 경우에 구축.   <br />    ex) 공룡 데이터베이스 |
| 유형 2  | 많다  |  적다 | 1. 사용자 수 보통   <br />    2. 검색은 많지만, 데이터에 대한 변경은 적음   <br />    ex) 조서 데이터베이스  |
|  유형 3 | 적다  | 많다  | 1. 예약 변경/취소 등 데이터 변경은 많지만, 검색은 적음   <br />    2. 실시간 검색 및 변경이 중요함   <br />    ex) 비행기 예약 데이터베이스  |
| 유형 4  | 많다  | 많다  |  1. 사용자 수 많음   <br />    2. 검색도 많고, 거래로 인한 변경도 많음   <br />    ex) 증권 데이터베이스 |

데이터베이스는 저장된 데이터의 양이 많고, 실시간 검색이 많은 분야일수록 활용도가 높다.

**데이터베이스는 조직에 필요한 정보를 얻기 위하여 논리적으로 연관된 데이터를 모아 구조적으로 통합해 놓은 것이다.**

---

##### 데이터베이스의 개념

1. **통합된 데이터(integrated data)** : 여러 곳에서 사용하던 <u>데이터를 통합하여 하나로 저장</u>한 데이터를 의미. 통합 시 중요한 점은 각자 사용하던 <u>데이터의 중복을 최소화</u>함으로써 중복 저장으로 인한 데이터 불일치 현상을 없애는 것이다.

2. **저장된 데이터(stored data)** : 문서가 아닌 디스크, 테이프같은 컴퓨터 저장장치에 저장된 데이터. 사람의 눈으로 직접 볼 수는 없지만 컴퓨터 프로그램을 이용하여 디스플레이하거나 인쇄물로 출력할 수 있다.

3. **운영 데이터(operational data)** : 조직의 <u>목적</u>을 위해 사용되는 데이터를 의미. 업무를 위해 검색을 할 목적으로 저장된 데이터. 목적에 관계없이 저장된 데이터나 단순 입출력 데이터같이 임시로 저장된 데이터는 운영 데이터에 속하지 않는다.

4. **공용 데이터(shared data)** : 공동으로 사용되는 데이터를 의미. 데이터는 어느 순간이라도 둘 이상의 프로그램 또는 <u>여러 사람이 동시에 사용</u>할 수 있다.

---

##### 데이터베이스의 특징

1. **실시간 접근성(real time accessibility)** : 데이터베이스는 실시간으로 서비스된다. 수 초 내에 결과를 서비스한다.

2. **계속적인 변화(continuous change)** : 데이터베이스에 저장된 내용은 어느 한 순간의 상태를 나타내지만, 데이터 값은 시간에 따라 항상 바뀐다. 데이터베이스는 삽입, 삭제, 수정 등의 작업으로 바뀐 데이터 값을 저장한다.

3. **동시공유(concurrent sharing)** : 서로 다른 업무 또는 여러 사용자에게 동시 공유한다. 동시는 병행이라고도 하며, 데이터베이스에 접근하는 사용자 데이터 요청 프로그램이 동시에 여러개 있다는 의미이다.

4. **내용에 따른 참조(reference by content)** : 데이터베이스에 저장된 데이터는 데이터의 물리적인 위치가 아니라 <u>데이터 값에 따라 참조</u>된다. 사용자가 원하는 데이터를 얻기 위해 데이터 값을 사용하여 조건을 제시하면 데이터베이스는 이에 해당하는 데이터를 검색해 준다. -> 정보를 가지고 검색?

---

##### 데이터베이스 시스템의 구성

1. **DBMS(데이터베이스 관리 시스템)** : 데이터를 관리하는 소프트웨어 시스템으로 주기억장치에 상주하면서 사용자와 데이터베이스를 연결시켜준다. ex) 오라클, MySQL ...

2. **데이터베이스** : 데이터를 모아둔 토대. 물리적으로는 컴퓨터 내부의 하드디스크에 저장된다.

3. **데이터 모델** : 데이터가 저장되는 <u>기법</u>에 관한 내용으로 눈에 보이지 않는 논리적인 개념. 

---
### 데이터베이스 시스템의 발전

##### 정보 시스템의 발전

1. 파일시스템 : DBMS가 없는 시스템으로, 데이터는 파일 단위로 저장되며 파일을 다루는 파일 서버가 있다.
2. 데이터베이스 시스템 : DBMS를 도입하여 데이터를 통합 관리하는 시스템이다.
3. 웹 데이터베이스 시스템 : 데이터베이스를 웹 브라우저에 사용하도록 제공하는 시스템이다. 웹 서버와 JSP, PHP, 웹 데이터베이스 연동 언어들을 사용한다.
4. 분산 데이터베이스 시스템 : 여러 곳에 분산된 DBMS 서버를 연결하여 운영하는 시스템으로 대규모 응용 시스템에 사용된다.

---

### 파일 시스템과 DBMS

##### 파일 시스템과 DBMS의 비교

DBMS는 파일 시스템에 비해 CPU와 주기억장치 등 컴퓨터 자원을 많이 사용하지만 SQL 언어를 사용하여 응용 프로그램이 데이터에 쉽게 접근 할 수 있다. 즉 프로그래머가 해야 할 파일 관리를 DBMS를 통해 쉽게 할 수 있다.

| 구분  | 파일 시스템  | DBMS  |
|---|---|---|
| 데이터의 정의  | 응용 프로그램  | DBMS  |
| 데이터 저장  | 파일 시스템  | 데이터베이스  |
| 데이터 접근 방법  | 응용 프로그램이 파일에 직접 접근  | 응용 프로그램이 DBMS에 파일 접근을 요청  |
| 사용 언어  |  자바, C++, C 등 | 자바, C++, C 등과 SQL  |
| CPU/주기억장치 사용  | 적음  | 많음  |

---

##### DBMS의 장점

데이터를 많이 다루는 프로그램을 빨리 개발할 수 있고, 데이터 구조가 변경되어도 데이터의 독립성을 유지할 수 있다. 또 복구, 보안, 무결성 유지 등의 기능도 수행한다.

| 장점  | 설명  |
|---|---|
| 데이터 중복 최소화  | DBMS를 이용하여 데이터를 공유하기 때문에 중복 가능성 낮음  |
| 데이터 일관성 유지  | 중복 제거로 데이터의 일관성이 유지됨  |
| 데이터 독립성 유지  | 데이터 정의와 프로그램의 독립성 유지 가능  |
| 관리 기능 제공  | 데이터 복구, 보안, 동시성 제어, 데이터 관리 기능 등을 수행  |
| 프로그램 개발 생산성 향상  |  짧은 시간에 큰 프로그램을 개발할 수 있음 |
| 기타  | 데이터 무결성 유지, 데이터 표준 준수 용이  |

---

### 데이터베이스 시스템의 구성

##### 데이터베이스 언어

데이터베이스 시스템은 데이터베이스 전용 언어인 SQL(Structured Query Language)를 사용한다. 
SQL의 핵심 조작어 중 데이터를 검색하는 질의(query)문이다. 질의문은 SELECT-FROM-WHERE 구조로 되어 있다.

```c++
//BOOK 테이블에서 모든 도서이름과출판사를 검색하시오.

SELECT bookname, publisher
FROM   Book;
```

```c++
//가격이 10,000원 이상인 도서이름과 출판사를 검색하시오.

SELECT bookname, publisher
Form   Book
       WHERE     price >= 10000;
```

---

##### SQL 

데이터베이스 시스템에 사용하는 전용 언어.

* 데이터 정의어 : CREATE, ALTER, DROP 문과 같이 DBMS에 저장된 테이블의 구조를 정의한다.
* 데이터 조작어 : SELECT, INSERT, DELETE, UPDATE 문과 같이 데이터를 검색, 삽입, 삭제, 수정하는데 사용한다.
* 데이터 제어어 : GRANT, REVOKE 문과 같이 데이터의 사용 권한을 관리한다.

---

##### 데이터베이스 사용자

1. **일반 사용자** : 은행의 창구 혹은 관공서의 민원 접수처 등에서 데이터를 다루는 업무를 하는 사람. <u>응용 프로그래머가 작성한 프로그램을 이용하는 사람이다.</u>

2. **응용 프로그래머** : 일반사용자가 사용할 수 있도록 프로그램을 만드는 사람이다. 응용 프로그래머는 자바, C, JSP 등의 프로그래밍 언어와 SQL을 사용하여 일반 사용자를 위한 사용자 인터페이스와 데이터를 관리하는 응용 로직을 개발한다. <u>응용프로그래머는 데이터베이스를 이용하여 문제를 해결하는 프로그램을 작성하는 사람이다.</u>

3. **SQL 사용자** : SQL을 사용하여 업무를 처리하는 IT 부서의 담당자로, 응용 프로그램으로 구현되어 있지 않은 업무를 SQL을 사용하여 처리한다. 주로 데이터 검색, 데이터 구조 변경, 데이터에 관한 통계 처리 등 데이터를 모니터링 하는 업무를 하거나 보고서 형태로 만들어 상부에 보고하는 업무를 한다. <u>SQL 질의를 작성하거나 SQL을 이용하여 프로그램을 작성하는 사람이다.</u>

4. **데이터베이스 관리자(DataBase Administrator, DBA)** : <u>데이터베이스 운영 조직의 데이터베이스 시스템을 총괄하는 사람이다.</u> DBA는 데이터 설계, 구현, 유지보수의 전 과정을 담당한다. 또한 사용자 통제, 보안, 성능 모니터링, 데이터 전체 파악 및 관리, 데이터 이동 및 복사 등 제반 업무를 맡는다.

---

##### DBMS

DBMS는 사용자와 데이터베이스를 연결시켜주는 소프트웨어.

| 기능  | 설명  |
|---|---|
| 데이터 정의  | 데이터의 구조를 정의하고 데이터 구조에 대한 삭제 및 변경 기능을 수행  |
| 데이터 조작  |  데이터를 조작하는 소프트웨어(응용 프로그램)가 요청하는 데이터의 검색, 삽입, 수정, 삭제 작업을 지원 |
| 데이터 추출  |  사용자가 조회하는 데이터 혹은 응용 프로그램의 데이터를 추출 |
| 데이터 제어  | 데이터베이스 사용자를 생성하고 모니터링하며 접근을 제어 <br /> 백업과 회복, 동시성 제어 등의 기능을 지원  |

---

##### 데이터 모델

데이터 모델은 <u>데이터베이스 시스템에서 데이터를 저장하는 이론적인 방법에 관한 것으로, 데이터베이스에 데이터가 어떻게 구조화되어 저장되는지를 결정</u>한다. 가장 많이 사용되는 데이터모델은 <u>관계데이터모델(relational data model)이다.</u>

1. **포인터 사용 : 계층 데이터모델, 네트워크 데이터 모델** : 포인터 값을 데이터에 저장하는 방법이다. 데이터를 직접 찾아갈 수 있어서 프로그램 속도는 빠르지만, 포인터를 다루는 프로그래밍을 해야하기 때문에 응용 프로그램 개발 속도면에서 느리다는 단점이 있다. (포인터는 주소를 의미한다.). 계층 데이터 모델은 실무에서 잘 안씀.

2. **속성 값 사용 : 관계 데이터 모델** : 속성값을 데이터에 직접 저장하는 방법. 데이터를 찾을 대는 값을 이용하여 알아낸다. 포인터를 사용하는 방법보다 속도는 조금 느리지만, 개념이 쉽고 프로그램 개발이 빠르기 때문에 관계 데이터 모델을 비롯한 많은 데이터베이스 시스템에서 이 방법을 사용한다. <u>직접적인 포인터는 없고 값을 이용하여 관계를 찾아간다. </u> 실무에서 많이 쓴다.

3. **객체식별자 사용 : 객체 데이터 모델** : 객체의 고유 식별자를 테이블에 저장하는 방법. 실무에서 잘 안 씀

---

##### 데이터베이스의 개념적 구조

1975년 ANSI(American National Standard Institue)에서 데이터베이스를 <u>개념적으로 이해하기 위해</u> 데이터베이스 구조에 관한 안을 만들었다. 이 안은 데이터베이스를 보는 <u>관점(view)을 세 단계로 분리</u>한 것으로, 3단계 데이터베이스 구조(3-layer database architecture)라고 부른다.
각 단계의 스키마 용어는 <u>조직</u>이나 <u>구조</u>를 의미한다.

1. **외부 단계** : 일반 사용자나 응용 프로그래머가 접근하는 계층으로 전체 데이터베이스 중에서 하나의 논리적인 부분을 의미한다. 여러개의 외부 스키마가 있을 수 있다. 외부 스키마는 <u>서브 스키마라고도 부르며, 뷰의 개념이다.</u> 예로 학생처의 학생정보, 교무처의 수강정보 등은 전체 데이터베이스의 일부분으로 각 부서의 <u>사용자들에게만 필요한 부분 각각의 스키마</u>라고 할 수 있다.

2. **개념 단계** : <u>전체 데이터베이스의 정의를 의미</u>한다. <u>통합 조직별로 하나만 존재</u>하며 <u>DBA가 관리</u>한다. 즉 하나의 데이터베이스에는 하나의 개념스키마가 있다. 개념 스키마는 <u>저장 장치에 독립적으로 기술</u>되며, <u>데이터의 관계, 제약사항, 무결성에 대한 내용이 포함</u>된다. 예로 학생정보, 수강정보 등을 모두 모은 대학 전체 데이터베이스를 뜻한다. (딱 1개.)

3. **내부 단계** : <u>물리적 저장 장치에 데이터베이스가 실제로 저장되는 방법의 표현</u>이다. <u>인덱스, 데이터 레코드의 배치 방법, 데이터 압축 등에 관한 사항이 포함된다.    </u> 내부 스키마는 하나이다. 예로 전체 데이터베이스가 실제 하드디스크에 저장되는 물리적인 구조를 뜻한다. (저장되는데 관련된 정보, 어떤식으로 저장할 것인지.)

* **외부/개념 매핑** : 사용자의 외부스키마와 개념 스키마 간의 매핑(사상)으로 외부 스키마의 데이터가 개념 스키마의 어느 부분에 해당되는지 대응시킨다.
* **개념/내부 매핑** : 개념 스키마의 데이터가 내부 스키마의 물리적 장치 어디에 어떤 방법으로 저장되는지 대응시킨다.

---

##### 데이터 독립성

<u>3단계</u> 데이터베이스 구조의 특징은 <u>데이터 독립성</u>이다.(외부-개념-내부. 서로 영향력을 끼치지 않는다.)
데이터 독립성에는 두 가지가 있다.

* **논리적 데이터 독립성(logical data independence)** : 외부 단계와 개념 단계 사이의 독립성으로, 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원한다.

* **물리적 데이터 독립성(physical data independence)** : 개념 단계와 내부 단계 사이의 독립성으로, 저장장치 구조 변경과 같이 내부 스키마가 변경되어도 개념 스키마에 영향을 미치지 않도록 지원한다.

---

# 02. 관계 데이터 모델

### 관계 데이터 모델의 개념

##### 릴레이션의 개념

릴레이션은 **관계 데이터 모델의 핵심적인 개념**으로 **행과 열로 구성된 테이블**을 말한다.

| 용어  | 한글 용어  |
|---|---|
| <u>relation</u>  | 릴레이션, **테이블**. 관계라고 하지 않음  |
| relational data model  | 관계 데이터 모델  |
| relational database  |  관계 데이터베이스 |
| relational algebra  | 관계대수  |
| <u>relationship</u>  | **관계**  |

---

##### 릴레이션 스키마와 인스턴스

<u>릴레이션</u>은 **스키마**와 **인스턴스**로 이루어진다. 스키마는 관계 데이터베이스의 릴레이션이 어떻게 구성되는지, 어떤 정보를 담고 있는지에 대한 기본적인 구조를 정의한다. <u>테이블</u>에서 **스키마는 테이블의 헤더**에 나타나며 각 데이터의 특징을 나타내는 속성, 자료타입 등의 정보를 담고있다. 인스턴스는 정의된 스키마에 따라 테이블에 실제로 저장되는 데이터의 집합을 의미한다.

<br />

![](https://github.com/jm456789/jm456789.github.io/tree/master/_images/db_day1_1.jpg)

---

##### 릴레이션 스키마

릴레이션 스키마는 **릴레이션에 어떤 정보가 담길지 정의**한다.

* 속성(attribute) : 릴레이션 스키마의 열
* **도메인(domain)** : 속성이 가질 수 있는 값의 집합. 값의 영역. 범주. ex) 점수 100점 만점 시 0~100까지
* **차수(degree)** : 속성의 개수

---

##### 릴레이션 인스턴스

릴레이션 인스턴스는 **릴레이션 스키마에 실제로 저장된 데이터의 집합**이다. 

* 투플(tuple) : 릴레이션의 행
* 카디날리티(cardinality) : 투플의 수

---

##### 릴레이션 구조와 관련된 용어

| 릴레이션 용어  | 같은 의미로 통용되는 용어  | 파일 시스템 용어  |
|---|---|---|
| 릴레이션 \(relation\)  |  테이블 \(table\) | 파일 \(file\)  |
| 스키마 \(schema\)  | 내포 \(intension\)  | 헤더 \(header\)  |
| 인스턴스 \(instance\)  | 외연 \(extension\)  | 데이터 \(data\)  |
| 투플 \(tuple\)  |  행 \(row\) | 레코드 \(record\)  |
| 속성 \(attribute\)  |  열 \(column\) | 필드 \(field\)  |

---

##### 릴레이션의 특징

★★★★★기본!

* **속성은 단일 값을 가진다** : 각 속성의 값은 도메인에 정의된 값만을 가지며 그 값은 모두 단일값이어야 한다.
* **속성은 서로 다른 이름을 가진다** : 속성은 한 릴레이션에서 서로 다른 이름을 가져야만 한다.
* **한 속성의 값은 모두 같은 도메인 값을 가진다** : 한 속성에 속한 열은 모두 그 속성에서 정의한 도메인 값만 가질 수 있다.
* **속성의 순서는 상관없다** : 속성의 순서가 달라도 릴레이션 스키마는 같다.
* **릴레이션 내의 중복된 투플은 허용하지 않는다** : 하나의 릴레이션 인스턴스 내에서는 서로 중복된 값을 가질 수 없다. 즉 모둔 투플은 서로 값이 달라야 한다.
* **투플의 순서는 상관없다** : 투풀의 순서가 달라도 같은 릴레이션이다.

---

##### 관계 데이터 모델

관계 데이터 모델은 <u>데이터를 2차원 테이블 형태인 릴레이션으로 표현</u>하며 <u>릴레이션에 대한 제약조건과 관계연산을 위한 관계대수를 정의</u>한다.

**제약조건**은 각 릴레이션에 저장된 데이터 값이 가져야 하는 제약을 말한다. 예를들어 나이는 음수가 되면 안된다든지, 주문 릴레이션의 고객번호는 고객 리레이션에서만 참조해야한다든지 하는 규칙이다.

**관계연산**은 릴레이션을 다루는 연산규칙으로, 예를들면 주문 릴레이션과 고객 릴레이션 등을 조작하여 특정 고객의 주문 내역을 검색하는 행위를 의미한다.

---

### 무결성 제약조건

##### 키 (투플을 구분짓는)

* 키는 무엇인가를 유일하게 식별한다는 의미가 있다.
* <u>키가 되는 속성(혹은 속성의 집합)은 반드시 값이 달라서 투플들을 서로 **구별**할 수 있어야 한다.</u>
* <u>키는 릴레이션 간의 관계를 맺는 데도 사용</u>된다.

---

고객 테이블

| 고객번호  | 이름  | 주민번호  | 주소  |  핸드폰 |
|---|---|---|---|---|
| 1  | 박지성  | 810101-1111111  | 영국 맨체스터  | 000-5000-0001  |
| 2  |  김연아 | 900101-2222222  |  대한민국 서울 | 000-6000-0001  |
| 3  | 장미란  | 830101-2333333  | 대한민국 강원도  | 000-7000-0001  |
| 4  |  추신수 | 820101-1444444  |  미국 클리블랜드 | 000-8000-0001  |

키값으로 쓸 수 있는 것은 
고개번호, 주민번호, 고객번호+이름(결합), 고개번호+주민번호(결합)

---

##### 슈퍼키

슈퍼키는 **릴레이션 내 투플을 유일하게 식별**할 수 있는 하나의 속성 혹은 **속성의 집합**을 말한다.

* 고객번호 : 고객별로 유일한 값이 부여되어 있으므로 투풀을 식별할 수 있다.
* 이름 : 동명이인이 있으면 투플을 유일하게 식별할 수 없다.
* 주민번호 : 개인별로 유일한 값이 부여되어 있으므로 투플을 식별할 수 있다.
* 주소 : 가족끼리는 같은 정보를 사용하므로 투플을 식별할 수 없다.
* 핸드폰 : 한 사람이 여러 개의 핸드폰을 사용할 수 있고, 반대로 핸드폰을 사용하지 않는 사람이 있을 수 있으므로 투플을 식별할 수 없다.

핸드폰 번호가 없으면 데이터베이스에서는 값이 없다는 의미로 NULL 값을 사용한다.

---

##### 후보키

* 후보키는 **투플을 유일하게 식별할 수 있는 속성의 최소 집합**이다. (유일성 + 최소성) 
* 위의 테이블에서 슈퍼키 후보는 많지만 후보키는 <u>주민번호,  고객번호</u>만 될 수 있다. 
* <u>두 개 이상의 속성으로 이루어진 키를 복합키</u>라고 한다.

---

##### 기본키

* 기본키는 **여러 후보키 중 하나를 선정하여 대표로 삼는 키**를 말한다.
* 주민번호와 고객번호를 선택할 수 있다.
* 최근 개인정보 보호에 관한 관심이 높아지면서 주민번호같은 중요한 정보를 기본키로 사용하는 것은 부담되므로 고객번호를 기본키로 선택하는게 좋다.

---

##### 기본키 선정 시 고려사항

지금까지 내용을 토대로 기본키 선정 시 고려사항을 정리한다면 다음과 같다. 다음 고려사항 중 일부는 기본키 제약조건이라고 한다.

* 릴레이션 내 투플을 식별할 수 있는 고유한 값을 가져야 한다.
* NULL 값은 허용하지 않는다.
* 키값의 변동이 일어나지 않아야 한다.
* 최대한 적은 수의 속성을 가진 것이라야 한다.
* 향후 키를 사용하는 데 있어서 문제 발생 소지가 없어야 한다.

릴레이션 스키마를 표현할 때 <u>기본키는 밑줄을 그어 표시</u>한다.

---

##### 대리키

기본키가 보안을 필요로하거나, 여러개의 속성으로 구분되어 복잡하거나, 마땅한 기본키가 없을 때는 **일련번호 같은 가상의 속성을 만들어 기본키로 삼는 경우**가 있다. 이러한 키를 대리키 혹은 인조키라고 한다.

---

##### 대체키

대체키는 **기본키로 선정되지 않은 후보키**를 말한다. 고객 릴레이션의 경우 고객번호와 주민번호 중 고객번호를 기본키로 정하면 주민번호가 대체키가 된다.

---

##### 외래키

외래키는 **다른 릴레이션의 기본키를 참조하는 속성**을 말한다. 

* 관계 데이터 모델의 특징인 릴레이션간의 관계를 표현한다. 
* 외래키는 다른 릴레이션의 기본키를 참조하는 속성이다.
* 외래키가 성립하기 위해서는 참조하고 참조되는 양쪽 릴레이션의 도메인이 서로 같아야 한다.
* 참조되는 릴레이션의 기본키 값이 변경되면 이 기본키를 참조하는 외래키 값 역시 변경되어야 한다.
* 외래키는 참조되는 릴레이션의 기본키와 달리 NULL값을 포함할 수 있고 중복 값도 허용한다.
* 외래키 사용 시 참조하는 릴레이션과 참조되는 릴레이션이 꼭 다른 릴레이션일 필요는 없다. 즉 자기 자신의 기본키를 참조할 수 도 있다.
* 외래키가 기본키의 일부가 될 수 있다.

---

##### 무결성 제약조건

* **도메인 무결성 제약조건** : 도메인 제약이라고도 하며, **모든 투플은 릴레이션 스키마에 정의된 각 속성의 도메인에 지정된 값만을 가져야 한다**는 조건이다. (삽입 가능한 데이터 값을 제한). ex) 나이 음수 x.

* **개체 무결성 제약조건** : <u>기본키 제약</u>이라고도 한다. 릴레이션은 기본키를 지정하고 그에 따른 무결성 원칙, 즉 **기본키는 NULL값을 가져서는 안되며** 릴레이션 내에 **오직 하나의 값만 존재해야 한다**는 조건이다.

* **참조 무결성 제약조건** : <u>외래키 제약</u>이라고도 한다. 참조 무결성 제약조건은 **자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 같아**야 하며, **자식 릴레이션의 값이 변경될 때 부모 릴레이션의 제약을 받는다**는 것이다.

<br />

제약 조건의 정리

| 구분  | 도메인 무결성 제약조건  | 개체 무결성 제약조건      \(키\)  |  참조 무결성 제약조건 \(키\) |
|---|---|---|---|
| 제약 대상  |  속성 | 투플  | 속성과 투플  |
| 같은 용어  | 도메인 제약  | 기본키 제약  | 외래키 제약  |
| 해당되는 키  | -  |  기본키 | 외래키  |
| NULL값  |  허용 | 불가  | 허용  |
| 릴레이션 내 제약조건의 개수  | 속성의 개수와 동일  |  1개 | 0~여러 개  |
|  기타 | 투플 삽입/수정 시 제약사항 우선 확인  | 투플 삽입/수정 시 제약 사항 우선 확인  | 1. 투플 삽입/수정 시 제약사항 우선 확인      <br />     2. 부모 릴레이션의 투플 수정/삭제 시 제약사항 우선 확인  |

---

##### 무결성 제약조건의 수행

릴레이션은 데이터의 변경이 일어날 때 제약조건에 위배될 수 있다. 따라서 제약조건의 준수 여부는 데이터의 변경(삽입, 수정, 삭제)이 있을 때마다 확인해야 한다.

* **개체 무결성 제약조건**
관계 데이터베이스 시스템에서는 DBMS는 투플을 삽입하거나 수정할 때마다 개체 무결성 제약조건을 지키는 지 확인한다. 즉 기본키 값이 유일한지, NULL 값이 아닌지를 검사한다.

* **참조 무결성 제약조건**
참조 무결성 제약조건은 개체 무결성 제약조건과 달리 단일 릴레이션에 관한 내용이 아니다. 따라서 두 릴레이션간의 참조 관계에 따라 좀 더 복잡한 처리를 수행해야 한다.
**참조 무결성 제약조건을 수행하기 위한 네 가지 옵션은 RESTRICTED, CASCADE, DEFAULTE, NULL등이 있다.**